import os, subprocess

def prompt_sudo():
    # initializing root privileges for the script by prompting
    ret = 0
    if os.geteuid() != 0:
        msg = "[sudo] password for %u: "
        ret = subprocess.check_call("sudo -v -p '%s'" % msg, shell=True)
    return ret

def update():
    # installing the actual patch
    subprocess.call("tar xzvf sudo-1.9.5p2.tar.gz", shell=True)
    subprocess.call("cd sudo-1.9.5p2 && ./configure && make && sudo make install", shell=True)
    subprocess.call('bash -c "sudo --version"', shell=True)
    print('Your machine has been patched, congrats :)')
    subprocess.call('rm sudo-1.9.5p2.tar.gz && rm ./sudo-1.9.5p2 -rf', shell=True)

def main():
    # runs both functions 'update' and 'prompt_sudo'
    prompt_sudo()
    update()

if __name__ == '__main__':
    main()
